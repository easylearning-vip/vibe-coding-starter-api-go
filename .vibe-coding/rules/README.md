# Vibe Coding Starter Go API - AI 规则配置

本目录包含为 Vibe Coding Starter Go API 项目增强开发体验的 AI 配置文件。这些规则为 AI 驱动的开发提供上下文感知的辅助。

## 📁 规则结构

### `.cursor/` 目录
包含新的 Cursor 规则格式 (`.mdc` 文件) 和元数据及作用域应用:

- **`main-rules.mdc`** - 应用于所有 Go 文件的核心开发规则
- **`testing-rules.mdc`** - 针对测试文件和 Mock 的测试专用规则
- **`api-development.mdc`** - 针对处理器、路由和中间件的 HTTP 层规则
- **`go-api-rules.md`** - 综合开发指南 (传统格式)

### `.augment/` 目录
包含 Augment Code AI 的上下文感知开发辅助规则:

- **`main-development-rules.md`** - 核心 Go 开发标准和清洁架构模式
- **`testing-guidelines.md`** - 综合测试策略和质量标准
- **`api-development-standards.md`** - HTTP 层开发和 REST API 最佳实践
- **`README.md`** - Augment 规则文档和使用指南

### 根级别
- **`.cursorrules`** - 向后兼容的传统格式规则文件

## 🤖 AI 平台支持

本项目为多个 AI 编程平台提供全面的规则:

### Cursor IDE 规则
- **格式**: 带有元数据和 glob 模式的 `.mdc` 文件
- **特性**: 上下文感知激活、作用域应用
- **最适合**: 使用 Cursor IDE 的交互式开发

### Augment Code AI 规则
- **格式**: 包含综合指南的 Markdown 文件
- **特性**: 上下文感知辅助、代码生成模式
- **最适合**: 使用 Augment Code 平台的 AI 驱动开发

## 🎯 规则类型和作用域

### 主规则 (`main-rules.mdc`)
- **作用域**: 所有 Go 文件、Dockerfile、YAML 配置
- **始终应用**: 是
- **目的**: 核心 Go 开发标准、清洁架构模式、项目结构指南

### 测试规则 (`testing-rules.mdc`)
- **作用域**: 测试文件 (`*_test.go`)、测试工具、Mock
- **始终应用**: 否 (上下文感知)
- **目的**: 测试策略、Mock 模式、测试组织

### API 开发规则 (`api-development.mdc`)
- **作用域**: 处理器、服务器、中间件文件
- **始终应用**: 否 (上下文感知)
- **目的**: HTTP 层模式、REST API 标准、请求/响应处理

### Augment 规则作用域

#### 主开发规则 (`main-development-rules.md`)
- **作用域**: 所有 Go 源文件、配置文件、项目结构
- **目的**: 清洁架构指导、Go 最佳实践、依赖注入模式

#### 测试指南 (`testing-guidelines.md`)
- **作用域**: 测试文件、Mock 实现、测试工具
- **目的**: 测试金字塔策略、Mock 模式、覆盖率要求

#### API 开发标准 (`api-development-standards.md`)
- **作用域**: HTTP 处理器、中间件、路由、API 相关代码
- **目的**: RESTful 设计、安全实践、Swagger 文档

## 🚀 使用方法

### Cursor IDE 用户
1. 在 Cursor IDE 中打开项目
2. 规则将被自动检测和应用
3. 规则基于文件模式和上下文进行作用域限定
4. 检查 Agent 侧边栏查看哪些规则处于活动状态

### Augment Code AI 用户
1. 在你喜欢的 IDE 中使用 Augment Code 扩展打开项目
2. 规则会从 `.augment/` 目录自动加载
3. AI 辅助将遵循既定的模式和标准
4. 使用引用你想要实现的模式的具体提示词

### 规则激活
- **主规则**: 在处理 Go 文件时始终活跃
- **测试规则**: 在处理测试文件时激活
- **API 规则**: 在处理 HTTP 层代码时激活

### 手动规则调用

#### Cursor IDE
你可以在提示词中手动引用特定规则:
```
@main-rules 遵循项目模式创建新服务
@testing-rules 为用户服务编写综合测试
@api-development 为产品实体创建 REST 端点
```

#### Augment Code AI
在提示词中引用模式和指南:
```
"遵循主开发规则，为产品管理创建新服务"
"使用测试指南，为用户服务编写综合测试"
"遵循 API 开发标准，为产品实体创建 REST 端点"
```

## 📖 规则内容概览

### 主开发规则
- Go 最佳实践和约定
- 清洁架构实现
- 依赖注入模式
- 错误处理标准
- 日志记录指南
- GORM 数据库模式
- 安全要求
- 性能优化

### 测试指南
- 测试金字塔策略 (单元测试 80%, 集成测试 15%, E2E 测试 5%)
- 测试命名约定
- Mock 实现模式
- 测试工具和辅助函数
- 覆盖率要求
- 数据库集成测试

### API 开发标准
- RESTful API 设计原则
- HTTP 状态码使用
- 请求/响应格式标准
- 中间件实现模式
- 路由组织
- Swagger 文档
- 安全最佳实践
- 分页实现

## 🤖 AI 提示词最佳实践

### 上下文设置
与 AI 协作时，提供以下上下文:
- 你正在处理哪一层 (handler/service/repository)
- 相关模型和关系
- 代码库中的现有模式
- 所需功能和约束

### 示例提示词
```
"为 'Category' 实体创建完整的 CRUD 实现，遵循现有的 User 模式:
- 带有 GORM 标签和验证的模型
- 带有错误处理的 Repository 接口和实现
- 带有业务逻辑和缓存的 Service 层
- 带有验证和适当 HTTP 响应的 Handler
- 带有 Mock 的完整测试套件
- 所有端点的 Swagger 文档"
```

### 代码生成请求
按以下结构组织请求:
1. "我需要为 [实体] 实现 [功能]"
2. "遵循项目中的现有模式"
3. "包含适当的错误处理和日志记录"
4. "生成对应的测试"
5. "添加 Swagger 文档"

## 🔧 自定义配置

### 添加新规则
1. 在 `.cursor/` 目录中创建新的 `.mdc` 文件
2. 定义元数据 (description, globs, alwaysApply)
3. 以 markdown 格式添加规则内容
4. 使用相关文件模式进行测试

### 修改现有规则
1. 编辑相应的 `.mdc` 文件
2. 如需要，更新 glob 模式
3. 使用目标文件测试更改

### 规则元数据格式
```yaml
---
description: 规则目的的简要描述
globs: ["**/*.go", "**/*.md"]  # 要匹配的文件模式
alwaysApply: true  # 或 false 用于上下文感知应用
---
```

## 📚 与项目文档的集成

这些 AI 规则旨在与项目的开发文档无缝协作:

- **开发指南** (`docs/development-guide.md`) - 综合开发说明
- **架构文档** (`docs/architecture.md`) - 系统设计和模式
- **API 设计** (`docs/api-design.md`) - REST API 规范
- **测试指南** (`docs/testing-guide.md`) - 测试策略和模式

## 🎯 效益

### 对开发者
- 遵循项目模式的一致代码生成
- 减少文档和代码之间的上下文切换
- 自动遵循项目标准
- 新团队成员更快上手

### 对 AI 辅助开发
- 上下文感知的代码建议
- 模式一致的实现
- 综合测试生成
- 与文档对齐的开发

### 对项目维护
- 强制执行编码标准
- 一致的架构实现
- 减少代码审查开销
- 提高代码质量和可维护性

## 🔄 版本控制

所有 AI 规则都进行版本控制，应该:
- 提交到代码仓库
- 在开发团队间共享
- 随着项目模式演进而更新
- 在重大更改时记录文档

## 📞 支持

关于 AI 规则使用的问题:
1. 查看 `docs/` 中的项目文档
2. 审查代码库中的现有代码模式
3. 咨询开发团队
4. 基于团队反馈和演进模式更新规则

---

这些 AI 规则体现了 Vibe Coding 的 AI 驱动开发理念，确保 AI 辅助与项目标准和架构决策完美对齐。